<!DOCTYPE html>
<html>
<head>
    <title>AR Restaurant Menu</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        #menuUI {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            z-index: 1000;
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 10px;
        }
        .instruction {
            font-size: 1.2em;
            margin: 0;
        }
    </style>
</head>
<body>
    <a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false">
        <!-- Marker Definition -->
        <a-marker type="pattern" preset="custom" url="assets/pattern-marker.patt">
            <!-- Main Menu Card -->
            <a-entity position="0 0.5 0" rotation="-90 0 0">
                <a-entity id="mainMenu"
                    geometry="primitive: plane; width: 1.5; height: 2"
                    material="color: #FFFFFF; opacity: 0.9"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 8000">
                    
                    <a-text value="Menu" color="#333" align="center" position="0 0.8 0.01" scale="2 2 2"></a-text>
                    
                    <!-- Menu Items -->
                    <a-entity position="0 0.3 0" class="menu-item" id="burgerItem">
                        <a-text value="Classic Burger - $12" color="#222" align="center" position="0 0 0.01"></a-text>
                        <a-plane color="#FFD700" width="1.2" height="0.2" position="0 -0.1 0"></a-plane>
                    </a-entity>
                    
                    <a-entity position="0 -0.3 0" class="menu-item" id="pizzaItem">
                        <a-text value="Margherita Pizza - $15" color="#222" align="center" position="0 0 0.01"></a-text>
                        <a-plane color="#FFA500" width="1.2" height="0.2" position="0 -0.1 0"></a-plane>
                    </a-entity>
                </a-entity>
            </a-entity>

            <!-- 3D Food Models -->
            <!-- Burger -->
            <a-entity id="burgerModel" position="1 0 0" scale="0.5 0.5 0.5" visible="false">
                <a-box color="#8B4513" depth="0.3" height="0.1" width="0.8" position="0 0.3 0"></a-box>
                <a-cylinder color="#DEB887" radius="0.4" height="0.2" position="0 0.2 0"></a-cylinder>
                <a-sphere color="#FF6347" radius="0.15" position="0 0.35 0"></a-sphere>
                <a-box color="#228B22" depth="0.3" height="0.05" width="0.7" position="0 0.15 0"></a-box>
                <a-animation attribute="position" from="1 0 0" to="1 0.5 0" dur="2000" repeat="indefinite" direction="alternate"></a-animation>
            </a-entity>

            <!-- Pizza -->
            <a-entity id="pizzaModel" position="-1 0 0" scale="0.6 0.6 0.6" visible="false">
                <a-cylinder color="#FFA500" radius="0.8" height="0.1" theta-length="360" rotation="0 0 0">
                    <a-animation attribute="rotation" to="0 360 0" dur="3000" repeat="indefinite"></a-animation>
                </a-cylinder>
                <a-sphere color="#FF0000" radius="0.1" position="0.3 0.05 0.3"></a-sphere>
                <a-sphere color="#FFFFFF" radius="0.1" position="-0.3 0.05 0.3"></a-sphere>
                <a-sphere color="#00FF00" radius="0.1" position="0 0.05 -0.4"></a-sphere>
            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <!-- UI Overlay -->
    <div id="menuUI">
        <p class="instruction">Point your camera at the restaurant's AR marker</p>
    </div>

    <!-- Interaction Script -->
    <script>
        AFRAME.registerComponent('menu-interaction', {
            init: function() {
                const el = this.el;
                const itemType = el.id.includes('burger') ? 'burger' : 'pizza';
                
                el.addEventListener('click', () => {
                    // Animate menu item
                    el.setAttribute('animation', {
                        property: 'scale',
                        to: '1.2 1.2 1.2',
                        dir: 'alternate',
                        dur: 500
                    });

                    // Toggle 3D model visibility
                    const model = document.getElementById(`${itemType}Model`);
                    model.setAttribute('visible', !model.getAttribute('visible'));
                    
                    // Show nutritional info
                    const nutrition = {
                        burger: { calories: '650kcal', protein: '35g' },
                        pizza: { calories: '850kcal', protein: '28g' }
                    };
                    
                    const infoText = document.createElement('a-text');
                    infoText.setAttribute('value', `${nutrition[itemType].calories}\nProtein: ${nutrition[itemType].protein}`);
                    infoText.setAttribute('position', '0 -0.8 0');
                    infoText.setAttribute('color', itemType === 'burger' ? '#8B4513' : '#FF4500');
                    infoText.setAttribute('align', 'center');
                    el.appendChild(infoText);

                    setTimeout(() => {
                        el.removeChild(infoText);
                    }, 3000);
                });
            }
        });

        // Initialize interactions
        document.querySelectorAll('.menu-item').forEach(item => {
            item.setAttribute('menu-interaction', '');
        });

        // Handle AR marker found
        document.querySelector('a-marker').addEventListener('markerFound', () => {
            document.getElementById('menuUI').style.display = 'none';
        });

        // Handle AR marker lost
        document.querySelector('a-marker').addEventListener('markerLost', () => {
            document.getElementById('menuUI').style.display = 'block';
        });
    </script>
</body>
</html>